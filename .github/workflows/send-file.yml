name: Send file on update

on:
  push:
    paths:
      - "404.html"   # غيّر هذا للملف اللي تريد متابعته

jobs:
  send_email:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Send mail via Outlook
        uses: dawidd6/action-send-mail@v6
        with:
          server_address: smtp.office365.com
          server_port: 587
          secure: true
          username: ${{ secrets.EMAIL_USER }}    # إيميل Outlook المرسل
          password: ${{ secrets.EMAIL_PASS }}    # App Password من Outlook
          subject: "GitHub Actions - File Updated"
          to: "ahmedartime48@gmail.com"          # الإيميل اللي تبي توصله
          from: ${{ secrets.EMAIL_USER }}        # نفس إيميل Outlook
          body: "تم تحديث الملف في المستودع: ${{ github.repository }}"
          attachments: "404.html"                 # أي ملف تريد إرساله كمرفق
          convert_markdown: true
          priority: normal
          nodemailerlog: false
          nodemailerdebug: false
